<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Vote na nova logo do Auto Posto Fórmula 1 e concorra a 100L de combustível + R$200 na loja."
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <title>Auto Posto Fórmula 1 — Escolha da Logo</title>
  </head>
  <body
    style="
      font-family: 'Inter', system-ui, Arial;
      line-height: 1.4;
      margin: 0;
      color: #111;
    "
  >
    <div style="max-width: 900px; margin: 28px auto; padding: 20px">
      <header style="text-align: center; margin-bottom: 18px">
        <h1>Auto Posto Fórmula 1</h1>
        <p>
          Escolha sua logo preferida e concorra a: <br />
          <strong>100L de combustível para abastecer seu carro!</strong>
          + <strong>R$200,00</strong> para você recarregar suas energias em
          nossa conveniência!.
        </p>
      </header>

      <section>
        <h3>Selecione sua logo favorita</h3>
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-bottom: 18px;
          "
          id="logos"
        >
          <div
            class="logo-tile"
            data-id="logo1"
            style="
              border: 1px solid #ddd;
              padding: 8px;
              border-radius: 8px;
              cursor: pointer;
              text-align: center;
            "
          >
            <img
              src="images/logo1.png"
              alt="Logo 1"
              style="max-width: 100%; height: 100px; object-fit: contain"
            />
            <div>Logo 1</div>
          </div>
          <div
            class="logo-tile"
            data-id="logo2"
            style="
              border: 1px solid #ddd;
              padding: 8px;
              border-radius: 8px;
              cursor: pointer;
              text-align: center;
            "
          >
            <img
              src="images/logo2.png"
              alt="Logo 2"
              style="max-width: 100%; height: 100px; object-fit: contain"
            />
            <div>Logo 2</div>
          </div>
          <div
            class="logo-tile"
            data-id="logo3"
            style="
              border: 1px solid #ddd;
              padding: 8px;
              border-radius: 8px;
              cursor: pointer;
              text-align: center;
            "
          >
            <img
              src="images/logo3.png"
              alt="Logo 3"
              style="max-width: 100%; height: 100px; object-fit: contain"
            />
            <div>Logo 3</div>
          </div>
          <div
            class="logo-tile"
            data-id="logo4"
            style="
              border: 1px solid #ddd;
              padding: 8px;
              border-radius: 8px;
              cursor: pointer;
              text-align: center;
            "
          >
            <img
              src="images/logo4.png"
              alt="Logo 4"
              style="max-width: 100%; height: 100px; object-fit: contain"
            />
            <div>Logo 4</div>
          </div>
          <div
            class="logo-tile"
            data-id="logo5"
            style="
              border: 1px solid #ddd;
              padding: 8px;
              border-radius: 8px;
              cursor: pointer;
              text-align: center;
            "
          >
            <img
              src="images/logo5.png"
              alt="Logo 5"
              style="max-width: 100%; height: 100px; object-fit: contain"
            />
            <div>Logo 5</div>
          </div>
        </div>
      </section>

      <!-- FORMULÁRIO ajustado para ocupar largura total -->
      <form id="voteForm" style="width: 100%; max-width: 900px; margin: 0 auto">
        <div style="display: flex; gap: 12px; margin-bottom: 10px">
          <input
            name="name"
            id="name"
            type="text"
            placeholder="Seu nome completo"
            required
            style="
              flex: 1;
              padding: 8px 10px;
              font-size: 15px;
              border: 1px solid #ddd;
              border-radius: 6px;
            "
          />
          <input
            name="email"
            id="email"
            type="email"
            placeholder="seu@email.com"
            required
            style="
              flex: 1;
              padding: 8px 10px;
              font-size: 15px;
              border: 1px solid #ddd;
              border-radius: 6px;
            "
          />
        </div>
        <div style="display: flex; gap: 12px; margin-bottom: 10px">
          <input
            name="phone"
            id="phone"
            type="text"
            placeholder="DDD + número (11999999999)"
            required
            style="
              flex: 1;
              padding: 8px 10px;
              font-size: 15px;
              border: 1px solid #ddd;
              border-radius: 6px;
            "
          />
          <input
            name="instagram"
            id="instagram"
            type="text"
            placeholder="@seuusuario (opcional)"
            style="
              flex: 1;
              padding: 8px 10px;
              font-size: 15px;
              border: 1px solid #ddd;
              border-radius: 6px;
            "
          />
        </div>
        <div style="margin-bottom: 10px; font-size: 14px; color: #555">
          <label
            ><input id="agree" type="checkbox" required /> Li e aceito os
            <a href="#" target="_blank">termos da promoção</a></label
          >
        </div>
        <div style="text-align: center; margin-top: 12px">
          <button
            type="submit"
            style="
              background: #0f62fe;
              color: #fff;
              border: none;
              padding: 12px 20px;
              border-radius: 8px;
              cursor: pointer;
            "
          >
            Enviar participação
          </button>
          <div
            id="msg"
            style="font-size: 13px; color: #666; margin-top: 8px"
          ></div>
        </div>
      </form>
    </div>

    <script>
      const tiles = document.querySelectorAll(".logo-tile");
      let selectedLogo = null;
      tiles.forEach((t) => {
        t.addEventListener("click", () => {
          tiles.forEach((x) => (x.style.boxShadow = ""));
          tiles.forEach((x) => (x.style.borderColor = "#ddd"));
          t.style.boxShadow = "0 4px 12px rgba(0,0,0,.08)";
          t.style.borderColor = "#0f62fe";
          selectedLogo = t.dataset.id;
        });
      });

      document
        .getElementById("voteForm")
        .addEventListener("submit", async (ev) => {
          ev.preventDefault();
          document.getElementById("msg").textContent = "";
          if (!selectedLogo) {
            document.getElementById("msg").textContent = "Selecione uma logo.";
            return;
          }
          const payload = {
            name: document.getElementById("name").value.trim(),
            email: document.getElementById("email").value.trim().toLowerCase(),
            phone: document.getElementById("phone").value.replace(/\D/g, ""),
            instagram: document
              .getElementById("instagram")
              .value.replace(/^@/, "")
              .trim(),
            chosen_logo: selectedLogo,
            campaign: "Auto Posto Fórmula 1 - Escolha da Logo",
            submitted_at: new Date().toISOString(),
            user_agent: navigator.userAgent,
            referrer: document.referrer || null,
          };

          try {
            const res = await fetch(
              "https://n8n.srv1005513.hstgr.cloud/webhook/logo-vote",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
              }
            );
            if (!res.ok) throw new Error("Falha no envio");
            document.getElementById("msg").textContent =
              "Obrigado! Participação registrada.";
          } catch (err) {
            console.error(err);
            document.getElementById("msg").textContent =
              "Erro ao enviar. Tente novamente mais tarde.";
          }
        });
    </script>
  </body>
</html>
